{"version":3,"sources":["core/AudioContext.js","core/AudioPlayer.js","constants/NOTES.js","components/Key.js","utils/isAccidental.js","constants/KEYBOARD_MAP.js","components/Piano.js","utils/getNotesBetween.js","index.js"],"names":["window","AudioContext","webkitAudioContext","NullSoundFontPlayerNoteAudio","stop","NullSoundFontPlayer","play","AudioPlayer","audioContext","soundFPlayer","setInstrument","instrumentName","SoundFontPlayer","instrument","playNote","note","TONES","NOTES","reduce","notes","octaveNumber","notesInOctave","map","tone","Key","keyboardKey","isPlaying","keyClass","includes","isAccidental","className","MAPS","NOTE_TO_KEY","KEY_TO_NOTE","Piano","startNote","endNote","startingIndex","indexOf","endingIndex","slice","getNotesBetween","audioPlayer","useState","notesPlaying","setNotesPlaying","useEffect","addEventListener","handleKeyDown","handleKeyUp","e","repeat","key","toUpperCase","filter","notePlaying","index","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ff4a2cf3.chunk.js","sourcesContent":["export default window.AudioContext || window.webkitAudioContext;\r\n","import SoundFontPlayer from \"soundfont-player\";\r\nimport AudioContext from \"./AudioContext\";\r\n\r\nconst NullSoundFontPlayerNoteAudio = {\r\n\tstop() {},\r\n};\r\n\r\nconst NullSoundFontPlayer = {\r\n\tplay() {\r\n\t\treturn NullSoundFontPlayerNoteAudio;\r\n\t},\r\n};\r\n\r\nconst AudioPlayer = () => {\r\n\tconst audioContext = AudioContext && new AudioContext();\r\n\r\n\tlet soundFPlayer = NullSoundFontPlayer;\r\n\r\n\tconst Player = {\r\n\t\tasync setInstrument(instrumentName) {\r\n\t\t\tsoundFPlayer = (await SoundFontPlayer.instrument(audioContext, instrumentName)) || NullSoundFontPlayerNoteAudio;\r\n\t\t},\r\n\t\tplayNote(note) {\r\n\t\t\treturn soundFPlayer.play(note);\r\n\t\t},\r\n\t};\r\n\treturn Player;\r\n};\r\n\r\nexport default AudioPlayer;\r\n","// Standard notes on a scale from C-B\r\nconst TONES = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\r\n\r\n// Octave numbers on a standard grand piano\r\nconst OCTAVE_NUMBERS = [1, 2, 3, 4, 5, 6, 7];\r\n\r\n// Creates an array of all the notes on a standard piano, ie. All notes in all octaves\r\nconst NOTES = OCTAVE_NUMBERS.reduce((notes, octaveNumber) => {\r\n\t// Array chunk of notes in a single octave\r\n\tconst notesInOctave = TONES.map(tone => `${tone}${octaveNumber}`);\r\n\r\n\t// adds the Array chunk to the existing array of all notes in all octaves\r\n\treturn [...notes, ...notesInOctave];\r\n}, []);\r\n\r\n// console.log(NOTES);\r\n\r\nexport default NOTES;\r\n","import React from \"react\";\r\nimport isAccidental from \"../utils/isAccidental\";\r\n\r\nconst Key = ({ note, keyboardKey, isPlaying }) => {\r\n\tconst keyClass = isAccidental(note) ? \"key black\" : \"key white\";\r\n\treturn <div className={isPlaying ? `${keyClass} active` : keyClass}>{keyboardKey}</div>;\r\n};\r\n\r\nexport default Key;\r\n","import NOTES from \"../constants/NOTES\";\r\n\r\nexport default function isAccidental(note) {\r\n\treturn NOTES.includes(note) && note.includes(\"#\");\r\n}\r\n","const NOTE_TO_KEY = {\r\n\t\"F4\": \"A\",\r\n\t\"F#4\": \"W\",\r\n\t\"G4\": \"S\",\r\n\t\"G#4\": \"E\",\r\n\t\"A4\": \"D\",\r\n\t\"A#4\": \"R\",\r\n\t\"B4\": \"F\",\r\n\t\"C5\": \"G\",\r\n\t\"C#5\": \"Y\",\r\n\t\"D5\": \"H\",\r\n\t\"D#5\": \"U\",\r\n\t\"E5\": \"J\",\r\n\t\"F5\": \"K\",\r\n\t\"F#5\": \"O\",\r\n\t\"G5\": \"L\",\r\n\t\"G#5\": \"P\",\r\n\t\"A5\": \";\",\r\n\t\"A#5\": \"[\",\r\n\t\"B5\": \"'\",\r\n};\r\n\r\nconst KEY_TO_NOTE = {\r\n\t\"A\": \"F4\",\r\n\t\"W\": \"F#4\",\r\n\t\"S\": \"G4\",\r\n\t\"E\": \"G#4\",\r\n\t\"D\": \"A4\",\r\n\t\"R\": \"A#4\",\r\n\t\"F\": \"B4\",\r\n\t\"G\": \"C5\",\r\n\t\"Y\": \"C#5\",\r\n\t\"H\": \"D5\",\r\n\t\"U\": \"D#5\",\r\n\t\"J\": \"E5\",\r\n\t\"K\": \"F5\",\r\n\t\"O\": \"F#5\",\r\n\t\"L\": \"G5\",\r\n\t\"P\": \"G#5\",\r\n\t\";\": \"A5\",\r\n\t\"[\": \"A#5\",\r\n\t\"'\": \"B5\",\r\n};\r\n\r\nconst MAPS = { NOTE_TO_KEY, KEY_TO_NOTE };\r\n\r\nexport default MAPS;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport AudioPlayer from \"../core/AudioPlayer\";\r\nimport Key from \"./Key\";\r\nimport getNotesBetween from \"../utils/getNotesBetween\";\r\nimport MAPS from \"../constants/KEYBOARD_MAP\";\r\n\r\nconst Piano = ({ startNote, endNote }) => {\r\n\tconst notes = getNotesBetween(startNote, endNote);\r\n\tconst audioPlayer = AudioPlayer();\r\n\tconst [notesPlaying, setNotesPlaying] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\taudioPlayer.setInstrument(\"acoustic_grand_piano\");\r\n\t\twindow.addEventListener(\"keydown\", handleKeyDown);\r\n\t\twindow.addEventListener(\"keyup\", handleKeyUp);\r\n\t}, []);\r\n\r\n\tconst handleKeyDown = e => {\r\n\t\tif (!e.repeat) {\r\n\t\t\tconst note = MAPS.KEY_TO_NOTE[e.key.toUpperCase()];\r\n\t\t\tif (note) {\r\n\t\t\t\tsetNotesPlaying([...notesPlaying, note]);\r\n\t\t\t\taudioPlayer.playNote(note);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tconst handleKeyUp = e => {\r\n\t\tif (!e.repeat) {\r\n\t\t\tconst note = MAPS.KEY_TO_NOTE[e.key.toUpperCase()];\r\n\t\t\tif (note) {\r\n\t\t\t\tsetNotesPlaying([notesPlaying.filter(notePlaying => notePlaying !== note)]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"piano\">\r\n\t\t\t{notes.map((note, index) => {\r\n\t\t\t\treturn <Key key={index} note={note} keyboardKey={MAPS.NOTE_TO_KEY[note]} isPlaying={notesPlaying.includes(note)} />;\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Piano;\r\n","import NOTES from \"../constants/NOTES\";\r\n\r\nexport default function getNotesBetween(startNote, endNote) {\r\n\tconst startingIndex = NOTES.indexOf(startNote);\r\n\tconst endingIndex = NOTES.indexOf(endNote);\r\n\treturn NOTES.slice(startingIndex, endingIndex + 1);\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Piano from \"./components/Piano\";\nimport \"./assets/css/styles.css\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Piano startNote=\"F4\" endNote=\"B5\" />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\"),\n);\n"],"sourceRoot":""}